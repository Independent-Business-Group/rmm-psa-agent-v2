#!/bin/bash\n\n# Agent v2 Build Script\n# Builds the complete Agent v2 distribution\n\nset -e\n\necho \"ğŸš€ Building Agent v2...\"\n\n# Colors for output\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nRED='\\033[0;31m'\nNC='\\033[0m' # No Color\n\n# Build configuration\nVERSION=$(node -p \"require('./package.json').version\")\necho \"Version: $VERSION\"\n\n# Clean previous builds\necho \"ğŸ§¹ Cleaning previous builds...\"\nrm -rf dist/*\nmkdir -p dist/helpers\n\n# Install dependencies\necho \"ğŸ“¦ Installing dependencies...\"\nnpm install\n\n# Build core agent for all platforms\necho \"ğŸ”§ Building core agent...\"\nnpx pkg lib/start.js --targets node18-win-x64,node18-linux-x64,node18-macos-x64 --output dist/EverydayTechAgent-v2\n\nif [ $? -eq 0 ]; then\n    echo -e \"${GREEN}âœ… Core agent built successfully${NC}\"\nelse\n    echo -e \"${RED}âŒ Core agent build failed${NC}\"\n    exit 1\nfi\n\n# Build helpers for each platform\necho \"ğŸ”§ Building helpers...\"\n\nfor platform in win32 linux darwin; do\n    echo \"Building helpers for $platform...\"\n    node scripts/build-helpers.js $platform\n    \n    if [ $? -eq 0 ]; then\n        echo -e \"${GREEN}âœ… $platform helpers built${NC}\"\n    else\n        echo -e \"${YELLOW}âš ï¸ Some $platform helpers may have failed${NC}\"\n    fi\ndone\n\n# Create packages\necho \"ğŸ“¦ Creating distribution packages...\"\nnode scripts/package.js\n\nif [ $? -eq 0 ]; then\n    echo -e \"${GREEN}âœ… Packages created successfully${NC}\"\nelse\n    echo -e \"${RED}âŒ Package creation failed${NC}\"\n    exit 1\nfi\n\n# List built files\necho \"\\nğŸ“‹ Build Results:\"\necho \"Core Agent:\"\nls -la dist/EverydayTechAgent-v2*\n\necho \"\\nHelpers:\"\nls -la dist/helpers/\n\necho \"\\nPackages:\"\nls -la dist/packages/\n\necho -e \"\\n${GREEN}ğŸ‰ Agent v2 build completed successfully!${NC}\"\necho \"Version: $VERSION\"\necho \"Ready for deployment.\"\n